{"ast":null,"code":"var Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\nmodule.exports = prim;\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n  g.nodes().forEach(function (v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (parents.hasOwnProperty(v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n  return result;\n}","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}